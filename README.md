# Dump.sh

Это скрипт дампа `MySQL` баз данных. Он раскладывает дампы по разным папкам и проверяет
их размер, если размер дампа больше 0Б скрипт думает что всё хорошо. Всё дампы сжимаются.

Папки которые он создаёт:

* `daily` - Здесь лежат дампы которые назваются по номер для недели в месяце, хранятся дапы только за последнюю неделю
* `hourly` - Файлы в этой папке называются по номеру часа (в 24 часовом формате), хранится только последние 24 часа (файла)
* `mountly` - Как можно было догадаться здесь хранится 12 файлов которые называются номером месяца
* `yearly` - Здесь файлы именуются именем года, отсюда не удаляются

Эти все дирректорию создаются в родительной которая указывается с помощью
опции `-d`.

# Опции

| Опция           | По умолчанию | Обязательно? | Описание                                       |
| --------------- | ------------ | ------------ | ---------------------------------------------- |
| -d, --directory |              | Да           | В этой директории будут храниться дампы        |
| -u, --user      |              | Да           | Имя пользователя MySQL                         |
| -p, --password  | null         | Нет          | Пароль MySQL                                   |
| -h, --host      | localhost    | Нет          | Хост MySQL                                     |
| -p, --port      | 3306         | Нет          | Порт MySQL                                     |
| -n, --name      | ()           | Нет          | Имя баз данных MySQL (Можно указать несколько) |

# Установка 

```bash
$ cd ~
$ git clone git@github.com:slexx1234/dump.sh.git
```

На этом всё ;) Скрипту больше не чего не надо

# Запуск и пример использования

Думаю чем чаще делать дампы тем лучше, скрит осталось воткнуть в `cron`:

```bash
$ crontab -e
```

И добавить что то вроде:

```bash
@hourly /root/dump.sh/dump.sh -d=/root/dumps -u=MYSQL_USER -p=MYSQL_PASSWORD -n=DATABASE_ONE -n=DATABASE_TWO
```

Это всё! Пример выше будет делать дампы двух быз `MySQL` каждые 2 часа.

> Для дампов следует создать пользователя только с read-only правами.
